
<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>HistorIA v2.0.15</title>
<link rel="manifest" href="manifest.webmanifest"/>
<style>
:root{--bg:#0e0f13;--card:#151922;--text:#e9edf5;--muted:#aab1bd;--pri:#5b7cfa;--good:#3fcf8e;--bad:#e57474;--chip:#1f2531;}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
header{display:flex;align-items:center;gap:12px;padding:16px 20px;border-bottom:1px solid #1b2230}
.logo{display:flex;align-items:center;gap:10px;font-size:28px;font-weight:800}
.logo img{width:28px;height:28px;border-radius:6px}
.tag{background:var(--chip);padding:6px 10px;border-radius:10px;color:#cbd3df;font-weight:700}
header .sp{flex:1}
.btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(45deg,#3777ff,#61a0ff);color:#fff;border:none;border-radius:12px;padding:10px 14px;cursor:pointer}
.btn.secondary{background:#242b39;color:#cbd3df}
main{max-width:980px;margin:20px auto;padding:0 16px}
.card{background:var(--card);border:1px solid #1b2230;border-radius:16px;padding:18px}
.h1{font-size:28px;font-weight:800;margin:8px 0 16px}
.row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
.kv{display:flex;flex-direction:column;gap:8px;margin:12px 0}
.input,select,textarea{background:#111622;border:1px solid #252e3f;border-radius:12px;color:var(--text);padding:10px 12px;width:100%}
small{color:var(--muted)}
.chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.chip{background:var(--chip);color:#cbd3df;border-radius:999px;padding:6px 10px;font-size:12px}
.list{display:flex;flex-direction:column;gap:14px}
.proj{background:#121722;border:1px solid #212a3c;border-radius:14px;padding:14px}
.proj .title{font-size:20px;font-weight:800}
.proj .meta{color:#b7bfcc}
.badge{display:inline-block;padding:6px 10px;border-radius:10px;font-weight:700}
.badge.ok{background:#103a28;color:#aef0d0}
.badge.err{background:#3a1b1b;color:#ffd5d5}
footer{padding:30px 16px;text-align:center;color:#b8c0cc}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center}
.modal.show{display:flex}
.modal .box{background:var(--card);border:1px solid #1b2230;border-radius:14px;padding:16px;max-width:640px;width:92%}
.modal .box h3{margin:0 0 8px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:720px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<header>
  <div class="logo"><img src="assets/icon-192.png" alt=""/>HistorIA</div>
  <span class="tag">v2.0.15</span>
  <span class="sp"></span>
  <button id="btnTutorial" class="btn secondary">üìò Tutorial</button>
  <button id="btnIA" class="btn secondary">‚öôÔ∏è IA</button>
</header>

<main>
  <section class="card">
    <div class="h1">Seus roteiros</div>
    <button id="btnNew" class="btn">Ôºã Criar novo roteiro</button>
    <div id="list" class="list" style="margin-top:16px"></div>
  </section>
</main>

<footer>HistorIA - Suas id√©ias e suas escolhas na sua hist√≥ria!</footer>

<!-- Modal Novo Projeto -->
<div id="mdlNew" class="modal">
 <div class="box">
  <h3>Novo roteiro</h3>
  <div class="grid">
    <div class="kv"><label>T√≠tulo</label><input id="inTitle" class="input" placeholder="Ex.: A pr√≥xima v√≠tima"/></div>
    <div class="kv"><label>G√™nero</label>
      <select id="inGenre">
        <option>Suspense/Thriller</option><option>Mist√©rio/Investiga√ß√£o</option><option>Com√©dia</option><option>Terror</option><option>Aventura</option><option>Romance</option><option>Drama</option><option>Faroeste</option><option>Infantil</option><option>Fic√ß√£o cient√≠fica</option><option>Fantasia</option><option>+18 (adulto)</option>
      </select>
    </div>
    <div class="kv"><label>N√∫cleos (separados por v√≠rgula)</label><input id="inNucleos" class="input" placeholder="Ex.: pol√≠cia, fam√≠lia, imprensa"/></div>
    <div class="kv"><label>Cap√≠tulos</label><input id="inChapters" class="input" type="number" min="1" max="10" value="10"/></div>
    <div class="kv"><label>Primeira pessoa</label><select id="inFirst"><option value="no">N√£o</option><option value="yes">Sim</option></select></div>
    <div class="kv"><label>Enredo breve (guia ~50%)</label><textarea id="inPitch" rows="4" placeholder="Breve enredo com palavras‚Äëchave..."></textarea></div>
  </div>
  <div class="row" style="justify-content:flex-end;margin-top:12px">
    <button id="btCancelNew" class="btn secondary">Cancelar</button>
    <button id="btCreate" class="btn">Criar</button>
  </div>
 </div>
</div>

<!-- Modal IA -->
<div id="mdlIA" class="modal">
 <div class="box">
  <h3>Configurar IA</h3>
  <div class="grid">
    <div class="kv"><label>Provider</label><input id="inProv" class="input" value="Google AI Studio (Gemini)" disabled/></div>
    <div class="kv"><label>Modelo</label><input id="inModel" class="input" value="gemini-1.5-pro"/></div>
    <div class="kv" style="grid-column:1/-1"><label>License Key</label><input id="inKey" class="input" placeholder="API Key"/></div>
  </div>
  <small>Sua chave fica apenas neste dispositivo (localStorage).</small>
  <div class="row" style="justify-content:flex-end;margin-top:12px">
    <button id="btCloseIA" class="btn secondary">Fechar</button>
    <button id="btSaveIA" class="btn">Salvar</button>
  </div>
 </div>
</div>

<!-- Modal Tutorial -->
<div id="mdlTut" class="modal">
 <div class="box">
  <h3>Como usar</h3>
  <ul>
    <li>Crie um roteiro com t√≠tulo, g√™nero, n√∫cleos e enredo breve (‚âà50% do rumo).</li>
    <li>Cap√≠tulo ~15 min, com decis√µes em 50% e 90% (A/B/C).</li>
    <li>Status aparece no cart√£o: Gerando/Pronto/Falhou.</li>
    <li>Config. IA em ‚öôÔ∏è (chave do Gemini, modelo).</li>
    <li>Seus roteiros ficam salvos (IndexedDB + localStorage).</li>
  </ul>
  <div class="row" style="justify-content:flex-end;margin-top:12px">
    <button id="btCloseTut" class="btn">Fechar</button>
  </div>
 </div>
</div>

<script src="webapp.v2.0.15.js"></script>
<script>
if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
</script>
</body>
</html>
